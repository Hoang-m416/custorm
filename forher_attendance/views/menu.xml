<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <data>
    <record id="hr_attendance.menu_hr_attendance_root" model="ir.ui.menu">
        <field name="active" eval="False"/>
    </record>
    <!-- Menu gốc Chấm công -->
    <menuitem id="menu_forher_attendance_root"
              name="Chấm Công"
              sequence="4"
              groups="forher_company_overview.forher_group_board,forher_company_overview.forher_group_branch_manager,forher_company_overview.forher_group_employee,base.group_system"/>

    <!-- Action Tổng quan cho Quản lý/Giám đốc -->
    <record id="action_manager_overview" model="ir.actions.act_window">
      <field name="name">Tổng quan nhân viên</field>
      <field name="res_model">hr.employee</field>
      <field name="view_mode">kanban,list,form</field>
      <field name="context">{"search_default_active": 1}</field>
      <field name="help" type="html">
        <p class="o_view_nocontent_smiling_face">Tổng quan nhân viên và chấm công</p>
      </field>
    </record>

    <!-- Action Calendar Phân ca -->
    <record id="action_shift_assignment_calendar_manager" model="ir.actions.act_window">
        <field name="name">Lịch phân ca</field>
        <field name="res_model">forher.shift.assignment</field>
        <field name="view_mode">calendar,list,form</field>
        <field name="view_id" ref="view_forher_shift_assignment_calendar"/>
    </record>

    <!-- Menu Lịch chấm công -->
    <menuitem id="menu_attendance_calendar"
              name="Lịch chấm công"
              parent="menu_forher_attendance_root"
              action="action_shift_assignment_calendar_manager"
              groups="forher_company_overview.forher_group_employee,forher_company_overview.forher_group_board,forher_company_overview.forher_group_branch_manager,base.group_system"
              sequence="1"/>

    <!-- Dashboard cá nhân -->
    <menuitem id="menu_my_attendance"
              name="Chấm công của tôi"
              parent="menu_forher_attendance_root"
              action="action_attendance_dashboard"
              groups="forher_company_overview.forher_group_employee,forher_company_overview.forher_group_branch_manager,forher_company_overview.forher_group_board,base.group_system"
              sequence="2"/>

    <record id="view_hr_attendance_calendar_forher" model="ir.ui.view">
      <field name="name">hr.attendance.calendar.forher</field>
      <field name="model">hr.attendance</field>
      <field name="arch" type="xml">
          <calendar string="Chấm công" date_start="date_start" date_stop="date_stop" color="is_late">
              <field name="employee_id"/>
              <field name="attendance_type_id"/>
          </calendar>
      </field>
  </record>

    <!-- Quản lý chấm công: chỉ Giám đốc & Quản lý CN -->
    <menuitem id="menu_attendance_management"
          name="Danh sách chấm công"
          parent="menu_forher_attendance_root"
          action="forher_attendance.forher_attendance_action_manager"
          groups="forher_company_overview.forher_group_board,forher_company_overview.forher_group_branch_manager,base.group_system"
          sequence="6"/>

    <!-- Action URL Kiosk (đặt trước menu) -->
    <record id="action_forher_kiosk_url" model="ir.actions.act_url">
      <field name="name">Mở Kiosk</field>
      <field name="url">/forher_attendance/kiosk</field>
      <field name="target">self</field>
    </record>

    <!-- Menu Kiosk -->
    <menuitem id="menu_attendance_kiosk"
              name="Chế độ Kiosk"
              parent="menu_forher_attendance_root"
              action="action_forher_kiosk_url"
              groups="forher_company_overview.forher_group_employee,forher_company_overview.forher_group_branch_manager,forher_company_overview.forher_group_board,base.group_system"
              sequence="7"/>
  </data>
</odoo>
