<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!-- ================= HR Employee Rules ================= -->

    <!-- Board: thấy tất cả nhân viên -->
    <record id="rule_hr_employee_board" model="ir.rule">
        <field name="name">Board - tất cả nhân viên</field>
        <field name="model_id" ref="hr.model_hr_employee"/>
        <field name="domain_force">[(1,'=',1)]</field>
        <field name="groups" eval="[(4, ref('forher_company_overview.forher_group_board'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="False"/>  <!-- Giám đốc chỉ đọc/sửa/xóa -->
        <field name="perm_unlink" eval="True"/>
    </record>

    <!-- Branch Manager: chỉ thấy nhân viên chi nhánh -->
    <record id="rule_hr_employee_branch_manager" model="ir.rule">
        <field name="name">Branch Manager - nhân viên chi nhánh</field>
        <field name="model_id" ref="hr.model_hr_employee"/>
        <field name="domain_force">[('company_id','=',user.company_id.id)]</field>
        <field name="groups" eval="[(4, ref('forher_company_overview.forher_group_branch_manager'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_unlink" eval="False"/>
    </record>

    <!-- Employee: chỉ thấy chính mình -->
    <record id="rule_hr_employee_employee" model="ir.rule">
        <field name="name">Employee - tự xem hồ sơ</field>
        <field name="model_id" ref="hr.model_hr_employee"/>
        <field name="domain_force">[('id','in',user.employee_ids.ids)]</field>
        <field name="groups" eval="[(4, ref('forher_company_overview.forher_group_employee'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="False"/>
        <field name="perm_create" eval="False"/>  <!-- Ẩn nút New -->
        <field name="perm_unlink" eval="False"/>
    </record>

    <!-- ================= HR Employee Document Rules ================= -->

    <!-- Board: thấy tất cả hồ sơ -->
    <record id="rule_hr_employee_document_board" model="ir.rule">
        <field name="name">Board - tất cả hồ sơ</field>
        <field name="model_id" ref="model_hr_employee_document"/>
        <field name="domain_force">[(1,'=',1)]</field>
        <field name="groups" eval="[(4, ref('forher_company_overview.forher_group_board'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="False"/>
        <field name="perm_unlink" eval="True"/>
    </record>

    <!-- Branch Manager: chỉ thấy hồ sơ nhân viên chi nhánh -->
    <record id="rule_hr_employee_document_branch_manager" model="ir.rule">
        <field name="name">Branch Manager - hồ sơ chi nhánh</field>
        <field name="model_id" ref="model_hr_employee_document"/>
        <field name="domain_force">[('employee_id.company_id','=',user.company_id.id)]</field>
        <field name="groups" eval="[(4, ref('forher_company_overview.forher_group_branch_manager'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_unlink" eval="False"/>
    </record>

    <!-- Employee: chỉ thấy hồ sơ của chính mình -->
    <record id="rule_hr_employee_document_employee" model="ir.rule">
        <field name="name">Employee - hồ sơ của mình</field>
        <field name="model_id" ref="model_hr_employee_document"/>
        <field name="domain_force">[('employee_id','in',user.employee_ids.ids)]</field>
        <field name="groups" eval="[(4, ref('forher_company_overview.forher_group_employee'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="False"/>
        <field name="perm_create" eval="False"/>  <!-- Không tạo hồ sơ mới -->
        <field name="perm_unlink" eval="False"/>
    </record>

</odoo>
